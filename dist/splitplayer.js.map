{"version":3,"sources":["ES6.js"],"names":[],"mappings":"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","file":"splitplayer.js","sourcesContent":["/* globals _, $, SplitPlayerVideo */\n\n'use strict';\n\n// player state constants\nconst playerState = {\n    unstarted: -1,\n    ended: 0,\n    playing: 1,\n    pause: 2,\n    buffering: 3,\n    loading: 6\n};\n\nvar SplitPlayer = function (settings) {\n\n    this.duration = 0;\n\n    this.readyCount = 0;\n\n    // video instances container\n    this.videos = [];\n\n    // plugin instances container\n    this.plugins = [];\n\n    // global player state\n    this.playerStateIs = playerState.inactive;\n\n    // ticker for onUpdate interval\n    this.ticker = null;\n\n    // dependencie loading status\n    this._dependenciesLoaded = false;\n\n    this.settings = $.extend({\n        hoster: 'youtube',\n        videos: [],\n        area: null,\n        maxVideos: 4\n    }, settings) ;\n\n    this._loadVideoDependencies();\n\n    return this;\n};\n\nSplitPlayer.prototype = {\n\n    getPlayedTime () {\n        return 0;\n    },\n\n    /*\n     * add Plugins\n     */\n    addPlugin (Plugin) {\n        let _instance = new Plugin(this);\n        this.plugins.push(_instance);\n        return _instance;\n    },\n\n    /*\n     * Load Video Dependecnies like youtubeIframeApi\n     */\n    _loadVideoDependencies() {\n\n        if (this._dependenciesLoaded) {\n            return;\n        }\n\n        SplitPlayerVideo[this.settings.hoster].load(\n            this._onVideoDependeciesReady.bind(this)\n        );\n\n    },\n\n    _onVideoDependeciesReady() {\n\n        this._dependenciesLoaded = true;\n\n        this._render();\n\n        /* add initial declared videos */\n        for (let video of this.settings.videos) {\n            this.addVideo(video);\n        }\n\n        this.playerStateIs = playerState.loading;\n\n        console.info('api loaded');\n    },\n\n    addVideo(video) {\n\n        // max videos check\n        if (this.videos.length >= this.settings.maxVideos) {\n            return console.info('video limit reached only %s allowed', this.settings.maxVideos);\n        }\n\n        this.videos.push(\n            // create hoster specific video instance\n            new SplitPlayerVideo[this.settings.hoster](this, {\n                video: video\n            })\n        );\n\n    },\n\n    removeVideo(videoId) {\n\n        var video = _.find(this.videos, function(item) {\n            return item.settings.video.videoId === videoId;\n        });\n\n        if (!video) {\n            return false;\n        }\n\n        video.destroy();\n\n        this.videos = _.without(\n            this.videos,\n            video\n        );\n\n        // reinit playerDuration\n        for (let thisVideo of this.videos) {\n            thisVideo.setPlayerDuration();\n        }\n\n        this.readyCount--;\n    },\n\n    /*\n     * called after all video player ready initialized\n     */\n    onReady() {\n\n        this.readyCount++;\n\n        // prevent if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return console.info('videos not ready yet');\n        }\n\n        this.playerStateIs = playerState.ready;\n\n        // hook onReady for plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onReady) {\n                Plugin.onReady();\n            }\n        }\n    },\n\n    onUpdate() {\n        // hook all plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onUpdate) {\n                Plugin.onUpdate();\n            }\n        }\n    },\n\n    changeState(state) {\n\n        if (this.isFreezed) {\n            return false;\n        }\n\n        console.info('state changed to %s', state);\n\n        // prevent if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return false;\n        }\n\n        if (state === playerState.buffering) {\n            return this.pause();\n        }\n\n        if (state === playerState.pause) {\n            return this.pause();\n        }\n\n        if (state === playerState.playing) {\n            return this.play();\n        }\n\n    },\n\n    play() {\n\n        // start ticker\n        this.ticker = window.setInterval(this.onUpdate.bind(this), 500);\n\n        for (let video of this.videos) {\n            video.play();\n        }\n\n        // hook onPlay for plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onPlay) {\n                Plugin.onPlay();\n            }\n        }\n\n        this.playerStateIs = playerState.playing;\n\n        return console.info('playing');\n    },\n\n    pause() {\n        // abort if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return console.info('pause not ready yet');\n        }\n\n        // abort if player not playing state\n        if (this.playerStateIs === playerState.pause) {\n            return console.info('allready pausing');\n        }\n\n        // pause all videos\n        for (let video of this.videos) {\n            video.pause();\n        }\n\n        // stop ticker\n        clearInterval(this.ticker);\n\n        // hook all plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onPause) {\n                Plugin.onPause();\n            }\n        }\n\n        this.playerStateIs = playerState.pause;\n\n        return console.info('pause');\n    },\n\n    /*\n     * Toggle Video from play to pause vice versa\n     */\n    toggle() {\n        if (this.playerStateIs === playerState.pause) {\n            return this.play();\n        }\n        return this.pause();\n    },\n\n    stop() {\n        // abort if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return console.info('stop not ready yet');\n        }\n\n        // abort if player not playing state\n        if (this.playerStateIs === playerState.unstarted) {\n            return;\n        }\n\n        // pause all videos\n        for (let video of this.videos) {\n            video.stop();\n        }\n\n        // stop ticker\n        clearInterval(this.ticker);\n\n        // hook all plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onStop) {\n                Plugin.onStop();\n            }\n        }\n\n        this.playerStateIs = playerState.unstarted;\n\n        return console.info('stopped');\n    },\n\n    timeTo(time) {\n        for (let video of this.videos) {\n            video.timeTo(time);\n        }\n    },\n\n    _videosInState(state) {\n        let inState = true;\n        for (let video of this.videos) {\n            if (video.getPlayerState() === state && inState) {\n                inState = false;\n            }\n        }\n\n        return inState;\n    },\n\n    _render() {\n        if (this.settings.area === null) {\n            return console.info('no html parent defined', this.settings.area);\n        }\n\n        $(this.settings.area).html('<div id=\"SplitPlayer\"></div>');\n\n    }\n\n};\n\n/* globals $ */\n\n'use strict';\n\nvar SplitPlayerTimePicker = function (timeline) {\n    this.timeline = timeline;\n\n    this.template = '<i class=\"preview-line\"><time></time></i>';\n    this.previewedTime = 0;\n    /*\n    this.playedTime = this.settings.startTime;\n\n    $(this.settings.durationElement).html(this.formatTime(this.settings.duration));\n    $(this.settings.currentTimeElement).html('0:00');\n    */\n    return this;\n};\n\nSplitPlayerTimePicker.prototype = {\n\n    onReady() {\n        this.render();\n        this._setEvents();\n    },\n\n    _setEvents() {\n        this.timeline.element\n            .on('mousemove', this._showTime.bind(this))\n            .on('mouseup', this._setTime.bind(this));\n    },\n\n    _showTime(e) {\n        let leftPos = (e.pageX - this.timeline.element.offset().left);\n        let percentage = ((leftPos * 100) / this.timeline.element.width());\n        this.previewedTime = ((this.timeline.player.duration / 100) * percentage);\n\n        this.previewLine.width(percentage + '%').find('time').html(this._formatTime(this.previewedTime));\n    },\n\n    _setTime() {\n        this.timeline.player.pause();\n        this.timeline.player.timeTo(this.previewedTime);\n        this.timeline.setTo(this.previewedTime);\n        this.timeline.player.play();\n    },\n\n    _formatTime(time) {\n        var minutes = Math.floor(time / 60);\n        var seconds = Math.round(time - minutes * 60);\n\n        if (seconds < 10) {\n            seconds = '0' + seconds;\n        }\n\n        return minutes + ':' + seconds;\n    },\n\n    render() {\n        this.timeline.element.append(this.template);\n        this.previewLine = this.timeline.element.find('.preview-line');\n    }\n\n};\n\n/* globals $ */\n\n'use strict';\n\nvar SplitPlayerTimeline = function (player) {\n    this.player = player;\n\n    this.element = null;\n    this.bar = null;\n\n    this.template = '<div id=\"timeline\"><i class=\"bar\"></i></div>';\n\n    return this;\n};\n\nSplitPlayerTimeline.prototype = {\n\n    /*\n     * extend Module\n     */\n    extend(Module) {\n        return this.player.plugins.push(new Module(this));\n    },\n\n    /*\n     * player onReady hook\n     */\n    onReady() {\n        this._render();\n    },\n\n    /*\n     * player onUpdate hook\n     */\n    onUpdate() {\n        this.setTo(this.player.getPlayedTime());\n    },\n\n    /*\n     * player onStop hook\n     */\n    onStop() {\n        this._reset();\n    },\n\n    /*\n     * Set Time to\n     */\n    setTo(seconds) {\n        let percentage = ((seconds * 100) / this.player.duration);\n        this.bar.css({\n            width: percentage + '%'\n        });\n    },\n\n    _reset() {\n        this.bar.css({\n            width: 0\n        });\n    },\n\n    _formatTime(time) {\n        let minutes = Math.floor(time / 60);\n        let seconds = Math.round(time - minutes * 60);\n\n        if (seconds < 10) {\n            seconds = '0' + seconds;\n        }\n\n        return minutes + ':' + seconds;\n    },\n\n    _render() {\n        let tmp = $(this.player.settings.area).append(this.template);\n        this.element = tmp.find('#timeline');\n        this.bar = this.element.find('i');\n    }\n};\n\n\n/* globals playerState, YT, $ */\n'use strict';\n\nvar SplitPlayerVideo = SplitPlayerVideo || {};\n\nSplitPlayerVideo.youtube = function (player, settings) {\n\n    this.player = player;\n    this.videoPlayer = null;\n\n    this.isSilent = false;\n\n    this.settings = $.extend({\n        video: null,\n        type: 'youtube'\n    }, settings);\n\n    this.render();\n    this.create();\n\n    return this;\n};\n\nSplitPlayerVideo.youtube.load = function (callback) {\n    $.getScript('//youtube.com/iframe_api', function () {\n        window.onYouTubeIframeAPIReady = callback;\n    });\n};\n\nSplitPlayerVideo.youtube.prototype = {\n\n    create() {\n\n        this.videoPlayer = new YT.Player(this.settings.video.videoId, {\n            width: '100%',\n            height: '100%',\n            videoId: this.settings.video.videoId,\n            startSeconds: this.settings.video.startSeconds,\n            playerVars: {\n                'controls': 1\n            },\n            events: {\n                onReady: this.onReady.bind(this),\n                onStateChange: this.onStateChange.bind(this)\n            }\n        });\n    },\n\n    onReady() {\n        this.setPlayerDuration();\n        this.stop();\n        this.player.onReady();\n    },\n\n    onStateChange(event) {\n\n        if (this.isSilence) {\n            return;\n        }\n        console.log(event.data);\n\n        if (event.data === YT.PlayerState.BUFFERING) {\n            return this.player.changeState(playerState.buffering);\n        }\n\n        if (event.data === YT.PlayerState.PLAYING) {\n            return this.player.changeState(playerState.playing);\n        }\n\n        if (event.data === YT.PlayerState.ENDED) {\n            this.timeTo(0);\n            return this.player.changeState(event.data);\n        }\n\n        if (event.data === YT.PlayerState.PAUSED) {\n            return this.player.changeState(playerState.pause);\n        }\n\n        console.info('state %s not fetched', event.data);\n    },\n\n    getPlayerState() {\n        return this.videoPlayer.getPlayerState();\n    },\n\n    remove() {\n        this.player.removeVideo(this.settings.video);\n        this.videoPlayer.destroy();\n    },\n\n    timeTo(time) {\n        debugger;\n\n        if (this.getDuration() === 0) {\n            this.isSilent = true;\n            this.stop();\n            this.isSilent = false;\n            return;\n        }\n\n        if (time >= this.getDuration()) {\n            this.videoPlayer.seekTo(0);\n            return console.info('time for %s out of range', this.settings.video.videoId);\n        }\n\n        time = (time + this.settings.video.startSeconds);\n\n        console.log('set time to %s', time);\n\n        this.videoPlayer.seekTo(time);\n    },\n\n    play() {\n        this.videoPlayer.playVideo();\n    },\n\n    pause() {\n        this.videoPlayer.pauseVideo();\n    },\n\n    stop() {\n        this.timeTo(0);\n        this.pause();\n    },\n\n    getDuration() {\n        return this.videoPlayer.getDuration() - this.settings.video.startSeconds;\n    },\n\n    setPlayerDuration() {\n        let _duration = this.getDuration();\n\n        if (this.player.duration < _duration) {\n            this.player.duration = _duration;\n            this.player.getPlayedTime = this.getPlayedTime.bind(this);\n        }\n    },\n\n    getPlayedTime() {\n        return this.videoPlayer.getCurrentTime() - this.settings.video.startSeconds;\n    },\n\n    render() {\n        $('#SplitPlayer').append('<div id=\"' + this.settings.video.videoId + '\"><div>');\n    },\n\n    destroy() {\n        // remove youtube video iframe\n        $('#' + this.settings.video.videoId).find('iframe').remove();\n    }\n\n};\n"]}