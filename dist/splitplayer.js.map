{"version":3,"sources":["ES6.js"],"names":[],"mappings":"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","file":"splitplayer.js","sourcesContent":["/* globals _, $, SplitPlayerVideo */\n\n'use strict';\n\n// player state constants\nconst playerState = {\n    unstarted: -1,\n    ended: 0,\n    playing: 1,\n    pause: 2,\n    buffering: 3,\n    loading: 6\n};\n\nvar SplitPlayer = function (settings) {\n\n    this.duration = 0;\n\n    this.readyCount = 0;\n\n    // video instances container\n    this.videos = [];\n\n    // plugin instances container\n    this.plugins = [];\n\n    // global player state\n    this.playerStateIs = playerState.inactive;\n\n    // dependencie loading status\n    this.dependenciesLoaded = false;\n\n    this.settings = $.extend({\n        hoster: 'youtube',\n        videos: [],\n        area: null,\n        maxVideos: 4\n    }, settings) ;\n\n    this.loadVideoDependencies();\n\n    return this;\n};\n\nSplitPlayer.prototype = {\n\n    getPlayedTime () {\n        return 0;\n    },\n\n    /*\n     * add Plugins\n     */\n    addPlugin (Plugin) {\n        this.plugins.push(new Plugin(this));\n    },\n\n    /*\n     * Load Video Dependecnies like youtubeIframeApi\n     */\n    loadVideoDependencies() {\n\n        SplitPlayerVideo[this.settings.hoster].load(\n            this.onVideoDependeciesReady.bind(this)\n        );\n\n    },\n\n    /*\n     * Load add Videos after Dependecnies Loaded\n     */\n    onVideoDependeciesReady() {\n\n        this.dependenciesLoaded = true;\n\n        this.render();\n\n        /* add initial declared videos */\n        for (let video of this.settings.videos) {\n            this.addVideo(video);\n        }\n\n        this.playerStateIs = playerState.loading;\n\n        console.info('api loaded');\n    },\n\n    addVideo(video) {\n\n        // max videos check\n        if (this.videos.length >= this.settings.maxVideos) {\n            return console.info('video limit reached only %s allowed', this.settings.maxVideos);\n        }\n\n        this.videos.push(\n            // create hoster specific video instance\n            new SplitPlayerVideo[this.settings.hoster](this, {\n                video: video\n            })\n        );\n\n    },\n\n    removeVideo(video) {\n\n        _.findWhere(this.videos, video).remove();\n\n        this.videos = _.without(\n            this.videos,\n            _.findWhere(this.videos, video)\n        );\n\n        this.readyCount--;\n    },\n\n    /*\n     * called after all video player ready initialized\n     */\n    onReady() {\n\n        this.readyCount++;\n\n        // prevent if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return console.info('videos not ready yet');\n        }\n\n        console.info('player and videos ready');\n\n        this.playerStateIs = playerState.ready;\n\n        // hook onReady for plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onReady) {\n                Plugin.onReady();\n            }\n        }\n    },\n\n    changeState(state) {\n\n        console.info('state changed to %s', state);\n\n        // prevent if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return false;\n        }\n\n        if (state === playerState.buffering) {\n            return this.pause();\n        }\n\n        if (state === playerState.pause) {\n            return this.pause();\n        }\n\n        if (state === playerState.playing) {\n            return this.play();\n        }\n\n\n    },\n\n    play() {\n\n        // prevent play if videos not ready\n        if (this.readyCount !== this.videos.length) {\n            return console.info('play not ready yet');\n        }\n\n        // abort if is playing allready\n        if (this.playerStateIs === playerState.playing) {\n            return console.info('allready playing');\n        }\n\n        for (let video of this.videos) {\n            video.play();\n        }\n\n        // hook onPlay for plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onPlay) {\n                Plugin.onPlay();\n            }\n        }\n\n        this.playerStateIs = playerState.playing;\n\n        return console.info('playing');\n    },\n\n    pause() {\n        // abort if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return console.log('pause not ready yet');\n        }\n\n        // abort if player not playing state\n        if (this.playerStateIs === playerState.pause) {\n            return console.log('allready pausing');\n        }\n\n        // pause all videos\n        for (let video of this.videos) {\n            video.pause();\n        }\n\n        // hook all plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onPause) {\n                Plugin.onPause();\n            }\n        }\n\n        this.playerStateIs = playerState.pause;\n\n        return console.info('pause');\n    },\n\n    stop() {\n        // abort if not all videos ready\n        if (this.readyCount !== this.videos.length) {\n            return console.log('pause not ready yet');\n        }\n\n        // abort if player not playing state\n        if (this.playerStateIs === playerState.unstarted) {\n            return;\n        }\n\n        // pause all videos\n        for (let video of this.videos) {\n            video.stop();\n        }\n\n        // hook all plugins\n        for (let Plugin of this.plugins) {\n            if (Plugin.onStop) {\n                Plugin.onStop();\n            }\n        }\n\n        this.playerStateIs = playerState.unstarted;\n\n        return console.info('stopped');\n    },\n\n    timeTo(time) {\n\n        for (let video of this.videos) {\n            video.timeTo(time);\n        }\n\n    },\n\n    render() {\n        if (this.settings.area === null) {\n            return console.log('no html parent defined');\n        }\n\n        $(this.settings.area).html('<div id=\"SplitPlayer\"></div>');\n\n    }\n\n};\n\n/* globals $ */\n\n'use strict';\n\nvar SplitPlayerTimePicker = function (player, settings) {\n    this.player = player;\n    this.playedTime = 0;\n    this.cycler = 0;\n    this.paused = true;\n    this.timeLine = null;\n    return this;\n    this.settings = $.extend({\n        element: null,\n        currentTimeElement: null,\n        durationElement: null,\n        startTime: 0,\n        duration: 10000,\n        previewLine: $('.preview-line')\n    }, settings);\n\n    this.playedTime = this.settings.startTime;\n\n    this.setEvents();\n\n    $(this.settings.durationElement).html(this.formatTime(this.settings.duration));\n    $(this.settings.currentTimeElement).html('0:00');\n\n    return this;\n};\n\nSplitPlayerTimePicker.prototype = {\n\n    onReady() {\n\n    },\n\n    onPlay() {\n        return console.log('plugin on play');\n        this.paused = false;\n        this.run();\n    },\n\n    onPause() {\n        return console.log('plugin on pause');\n        this.paused = true;\n        clearTimeout(this.cycler);\n    },\n\n    onStop() {\n        return console.log('plugin on stop');\n        this.playedTime = 0;\n        this.update();\n    },\n\n    setEvents() {\n        var self = this;\n\n        this.timeLine = $(this.settings.element);\n        this.timeLine.attr('max', this.settings.duration).rangeslider({\n            polyfill: false\n        });\n\n        $('.rangeslider').on('mousedown', function () {\n            self.player.timeTo(self.playedTime);\n        }).on('mousemove', function (e) {\n            var leftPos = e.pageX - $(this).offset().left;\n            var percentage = leftPos * 100 / $(this).width();\n            var percentageRounded = Math.round(percentage);\n            var playerTime = self.formatTime(self.settings.duration / 100 * percentageRounded);\n\n            self.settings.previewLine.width(percentage + '%').find('time').html(playerTime);\n        });\n\n        $(document).on('input', 'input[type=\"range\"]', function() {\n            var val = $(this).val();\n            self.playedTime = val;\n            self.settings.onChange(val);\n        });\n    },\n\n    run() {\n        // pause\n        if (this.playedTime >= this.settings.duration || this.paused) {\n            return this.pause();\n        }\n\n        this.playedTime++;\n        this.update();\n\n        clearTimeout(this.cycler);\n        this.cycler = setTimeout(this.run.bind(this), 1000);\n    },\n\n    update() {\n        this.timeLine.val(this.playedTime).change();\n\n        $(this.settings.currentTimeElement).html(this.formatTime(this.playedTime));\n    },\n\n    formatTime(time) {\n        var minutes = Math.floor(time / 60);\n        var seconds = Math.round(time - minutes * 60);\n\n        if (seconds < 10) {\n            seconds = '0' + seconds;\n        }\n\n        return minutes + ':' + seconds;\n    }\n\n};\n\n/* globals $ */\n\n'use strict';\n\nvar SplitPlayerTimeline = function (player) {\n    this.player = player;\n    this.cycler = null;\n    return this;\n};\n\nSplitPlayerTimeline.prototype = {\n\n    onReady() {\n        this.render();\n    },\n\n    onPlay() {\n        this.cycler = window.setInterval(this.getTime.bind(this), 50);\n\n        return console.log('plugin on play');\n    },\n\n    onPause() {\n        clearInterval(this.cycler);\n        return console.log('plugin on pause');\n    },\n\n    onStop() {\n        return console.log('plugin on stop');\n    },\n\n    getTime() {\n        console.log((this.player.getPlayedTime() * 100) / this.player.duration);\n    },\n\n    render() {\n        $(this.player.settings.area).append('<div id=\"timeline\"><i></i></div>');\n    }\n};\n\n\n/* globals playerState, YT, $ */\n'use strict';\n\nvar SplitPlayerVideo = SplitPlayerVideo || {};\n\nSplitPlayerVideo.youtube = function (player, settings) {\n\n    this.player = player;\n    this.videoPlayer = null;\n\n    this.settings = $.extend({\n        video: null,\n        type: 'youtube'\n    }, settings);\n\n    this.render();\n    this.create();\n\n    return this;\n};\n\nSplitPlayerVideo.youtube.load = function (callback) {\n    $.getScript('//youtube.com/iframe_api', function () {\n        window.onYouTubeIframeAPIReady = callback;\n    });\n};\n\nSplitPlayerVideo.youtube.prototype = {\n\n    create() {\n\n        var self = this;\n        this.videoPlayer = new YT.Player(this.settings.video.videoId, {\n            width: '100%',\n            height: '100%',\n            videoId: this.settings.video.videoId,\n            startSeconds: this.settings.video.startSeconds,\n            playerVars: {\n                'controls': 1\n            },\n            events: {\n                onReady: this.onReady.bind(this),\n                onStateChange (event) {\n                    self.onStateChange(event);\n                }\n            }\n        });\n    },\n\n    onReady() {\n        this.setPlayerDuration();\n        this.stop();\n        this.player.onReady();\n    },\n\n    onStateChange(event) {\n\n        if (event.data === YT.PlayerState.BUFFERING) {\n            return this.player.changeState(playerState.buffering);\n        }\n\n        if (event.data === YT.PlayerState.PLAYING) {\n            return this.player.changeState(playerState.playing);\n        }\n\n        if (event.data === YT.PlayerState.ENDED) {\n            this.timeTo(0);\n            return this.player.changeState(event.data);\n        }\n\n        if (event.data === YT.PlayerState.PAUSED) {\n            return this.player.changeState(playerState.pause);\n        }\n\n        console.info('event %s not fetched', event.data);\n    },\n\n    remove() {\n        this.player.removeVideo(this.settings.video);\n        this.videoPlayer.destroy();\n    },\n\n    timeTo(time) {\n        time = (time + this.settings.video.startSeconds);\n        console.log('set time to %s', time);\n        this.videoPlayer.seekTo(time);\n    },\n\n    play() {\n        this.videoPlayer.playVideo();\n    },\n\n    pause() {\n        this.videoPlayer.pauseVideo();\n    },\n\n    stop() {\n        this.timeTo(0);\n        this.pause();\n    },\n\n    getDuration() {\n        return this.videoPlayer.getDuration() - this.settings.video.startSeconds;\n    },\n\n    setPlayerDuration() {\n        var duration = this.getDuration();\n\n        if (this.player.duration < duration) {\n            this.player.duration = duration;\n            this.player.getPlayedTime = this.getPlayedTime.bind(this);\n        }\n    },\n\n    getPlayedTime() {\n        return this.videoPlayer.getCurrentTime() - this.settings.video.startSeconds;\n    },\n\n    render() {\n        $('#SplitPlayer').append('<div id=\"' + this.settings.video.videoId + '\"><div>');\n    },\n\n    destroy() {\n        // remove youtube video iframe\n        this.videoPlayer.destory();\n\n        // remove this video\n        this.player.removeVideo(this);\n    }\n\n};\n"]}